# 文档工作流

## 创建新系统文档

1. 在 `gdd/systems/<system>/` 下创建 `main.md`
2. 从该系统 memory 中提取已有决策和创意作为基础
3. 对照 vision 文档确保方向一致
4. 若系统 memory 不存在，同时创建 `gdd/memory/systems/<system>.md`

### 系统主文档模板

```markdown
# <系统名>设计

## 概述
系统的核心目的和在整体游戏中的角色。与设计支柱的关联。

## 设计目标
- 该系统要实现的玩家体验
- 成功标准：怎样算"设计得好"

## 核心机制
详细的机制设计。用流程图或伪代码描述复杂逻辑。

## 内容规划
具体内容（如技能列表、任务列表、道具表等）。用表格呈现结构化数据。

## 数值框架
关键数值和公式。标注哪些是确定值、哪些是待调优值。

## 与其他系统的关系
依赖和接口说明。引用对方系统 memory 中的接口约定。

## 开放问题
尚未确定的设计点。标注优先级。
```

## 编辑现有文档

1. 载入系统 memory + main.md
2. 理解修改的上下文和原因
3. 执行修改
4. **修改后检查清单**：
   - [ ] 是否与设计支柱一致？
   - [ ] 是否与同系统其他文档一致？
   - [ ] 是否影响 `shared/conventions.md` 中的约定？
   - [ ] 是否影响其他系统的接口？
5. 更新 memory：记录变更决策、日期、理由

## 拆分子文档

当系统主文档超过 500 行，或某部分足够独立时：
1. 将该部分提取到新文件（如 `systems/combat/skills.md`）
2. 在 main.md 中保留**摘要**并添加引用链接
3. 更新 memory 记录文档结构变更

## 写作规范

- 使用明确、无歧义的语言
- 数值设计用表格呈现
- 复杂逻辑用流程图或伪代码表达
- 保持术语与 `shared/glossary.md` 一致
- 用「**设计意图**：...」标注重要设计背后的"为什么"
- 区分「已确定」和「待讨论」的内容（后者用 `> [!TODO]` 标注）
